<UserControl x:Class="DesktopHub.UI.Widgets.QuickLaunchWidget"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             HorizontalAlignment="Stretch"
             AllowDrop="True"
             Drop="Widget_Drop"
             DragEnter="Widget_DragEnter"
             DragLeave="Widget_DragLeave">
    
    <UserControl.Resources>
        <SolidColorBrush x:Key="AccentBrush" Color="#4FC3F7"/>
        <SolidColorBrush x:Key="TextBrush" Color="#F5F7FA"/>
        <SolidColorBrush x:Key="DimTextBrush" Color="#B6C3CA"/>
        <SolidColorBrush x:Key="SurfaceBrush" Color="#26F5F7FA"/>
        <SolidColorBrush x:Key="HoverBrush" Color="#36F5F7FA"/>
    </UserControl.Resources>
    
    <Grid>
        <StackPanel>
            <!-- Header -->
            <Grid Margin="0,0,0,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock Grid.Column="0"
                          Text="Quick Launch"
                          FontSize="14"
                          FontWeight="SemiBold"
                          Foreground="{StaticResource TextBrush}"/>
                
                <!-- Add item button -->
                <Border Grid.Column="1"
                        x:Name="AddItemButton"
                        Background="{StaticResource SurfaceBrush}"
                        BorderBrush="#30F5F7FA"
                        BorderThickness="1"
                        CornerRadius="4"
                        Padding="10,4"
                        Cursor="Hand"
                        MouseLeftButtonDown="AddItemButton_Click">
                    <Border.Style>
                        <Style TargetType="Border">
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="{StaticResource HoverBrush}"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Border.Style>
                    <TextBlock Text="+ Add" FontSize="11" Foreground="{StaticResource AccentBrush}"/>
                </Border>
            </Grid>
            
            <!-- Add Item Panel (hidden by default) -->
            <Border x:Name="AddPanel"
                    Visibility="Collapsed"
                    Background="{StaticResource SurfaceBrush}"
                    CornerRadius="6"
                    Padding="10,8"
                    Margin="0,0,0,8">
                <StackPanel>
                    <!-- Name input -->
                    <TextBox x:Name="NameInput"
                            Background="Transparent"
                            BorderThickness="0"
                            Foreground="{StaticResource TextBrush}"
                            CaretBrush="{StaticResource TextBrush}"
                            FontSize="12"
                            Margin="0,0,0,6">
                        <TextBox.Style>
                            <Style TargetType="TextBox">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="TextBox">
                                            <Grid>
                                                <ScrollViewer x:Name="PART_ContentHost" VerticalAlignment="Center"/>
                                                <TextBlock x:Name="Placeholder"
                                                          Text="Display name..."
                                                          Foreground="#60F5F7FA"
                                                          FontSize="12"
                                                          VerticalAlignment="Center"
                                                          IsHitTestVisible="False"
                                                          Visibility="Collapsed"/>
                                            </Grid>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="Text" Value="">
                                                    <Setter TargetName="Placeholder" Property="Visibility" Value="Visible"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </TextBox.Style>
                    </TextBox>
                    
                    <!-- Path input + browse -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBox x:Name="PathInput"
                                Grid.Column="0"
                                Background="Transparent"
                                BorderThickness="0"
                                Foreground="{StaticResource TextBrush}"
                                CaretBrush="{StaticResource TextBrush}"
                                FontSize="11"
                                KeyDown="PathInput_KeyDown">
                            <TextBox.Style>
                                <Style TargetType="TextBox">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="TextBox">
                                                <Grid>
                                                    <ScrollViewer x:Name="PART_ContentHost" VerticalAlignment="Center"/>
                                                    <TextBlock x:Name="Placeholder"
                                                              Text="Folder path or file..."
                                                              Foreground="#60F5F7FA"
                                                              FontSize="11"
                                                              VerticalAlignment="Center"
                                                              IsHitTestVisible="False"
                                                              Visibility="Collapsed"/>
                                                </Grid>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="Text" Value="">
                                                        <Setter TargetName="Placeholder" Property="Visibility" Value="Visible"/>
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </TextBox.Style>
                        </TextBox>
                        
                        <Border Grid.Column="1"
                                Background="Transparent"
                                CornerRadius="4"
                                Padding="6,3"
                                Cursor="Hand"
                                MouseLeftButtonDown="BrowseButton_Click"
                                Margin="4,0,0,0">
                            <Border.Style>
                                <Style TargetType="Border">
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="{StaticResource HoverBrush}"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>
                            <TextBlock Text="Browse" FontSize="10" Foreground="{StaticResource AccentBrush}" VerticalAlignment="Center"/>
                        </Border>
                    </Grid>
                    
                    <!-- Save / Cancel buttons -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,6,0,0">
                        <Border Background="Transparent"
                                CornerRadius="4"
                                Padding="8,3"
                                Cursor="Hand"
                                Margin="0,0,6,0"
                                MouseLeftButtonDown="CancelAdd_Click">
                            <Border.Style>
                                <Style TargetType="Border">
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="{StaticResource HoverBrush}"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>
                            <TextBlock Text="Cancel" FontSize="10" Foreground="{StaticResource DimTextBrush}"/>
                        </Border>
                        <Border Background="{StaticResource SurfaceBrush}"
                                BorderBrush="#30F5F7FA"
                                BorderThickness="1"
                                CornerRadius="4"
                                Padding="10,3"
                                Cursor="Hand"
                                MouseLeftButtonDown="SaveAdd_Click">
                            <Border.Style>
                                <Style TargetType="Border">
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="{StaticResource HoverBrush}"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>
                            <TextBlock Text="Save" FontSize="10" Foreground="{StaticResource AccentBrush}"/>
                        </Border>
                    </StackPanel>
                </StackPanel>
            </Border>
            
            <!-- Launch Items List (vertical mode) -->
            <ScrollViewer x:Name="ItemsScroller"
                         MaxHeight="300"
                         VerticalScrollBarVisibility="Auto">
                <ScrollViewer.Resources>
                    <Style TargetType="ScrollBar">
                        <Setter Property="Width" Value="4"/>
                    </Style>
                </ScrollViewer.Resources>
                <StackPanel x:Name="ItemsPanel"/>
            </ScrollViewer>
            
            <!-- Launch Items List (horizontal mode) -->
            <ScrollViewer x:Name="HorizontalItemsScroller"
                         Visibility="Collapsed"
                         HorizontalScrollBarVisibility="Auto"
                         VerticalScrollBarVisibility="Disabled">
                <ScrollViewer.Resources>
                    <Style TargetType="ScrollBar">
                        <Setter Property="Height" Value="4"/>
                    </Style>
                </ScrollViewer.Resources>
                <StackPanel x:Name="HorizontalItemsPanel" Orientation="Horizontal"/>
            </ScrollViewer>
            
            <!-- Empty State -->
            <Border x:Name="EmptyState"
                    Visibility="Collapsed"
                    Padding="0,20">
                <StackPanel HorizontalAlignment="Center">
                    <TextBlock Text="No launch items"
                              FontSize="12"
                              Foreground="#A0F5F7FA"
                              HorizontalAlignment="Center"/>
                    <TextBlock Text="Click '+ Add' to add folders or files"
                              FontSize="10"
                              Foreground="#88F5F7FA"
                              HorizontalAlignment="Center"
                              Margin="0,4,0,0"/>
                </StackPanel>
            </Border>
            
            <!-- Footer -->
            <Border Margin="0,10,0,0"
                    BorderBrush="#15F5F7FA"
                    BorderThickness="0,1,0,0"
                    Padding="0,8,0,0">
                <TextBlock x:Name="StatusText"
                          Text="0 items"
                          FontSize="10"
                          Foreground="#A0F5F7FA"
                          VerticalAlignment="Center"/>
            </Border>
        </StackPanel>
    </Grid>
</UserControl>
