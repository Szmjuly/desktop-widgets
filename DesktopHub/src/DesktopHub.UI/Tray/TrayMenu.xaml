<Window x:Class="DesktopHub.UI.TrayMenu"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="DesktopHub Menu"
        WindowStyle="None"
        AllowsTransparency="False"
        Background="Transparent"
        ResizeMode="NoResize"
        Width="220"
        SizeToContent="Height"
        Topmost="True"
        ShowInTaskbar="False"
        Deactivated="Window_Deactivated"
        ShowActivated="True"
        LostFocus="Window_LostFocus"
        ContextMenu="{x:Null}">
    
    <Border x:Name="RootBorder" 
            Background="#F0181818" 
            CornerRadius="8" 
            BorderBrush="#442A2A2A" 
            BorderThickness="1"
            Padding="8">
        <StackPanel>
            <!-- Open Search -->
            <Border Background="Transparent"
                    CornerRadius="6"
                    Cursor="Hand"
                    MouseLeftButtonDown="OpenSearch_Click"
                    Padding="12,10">
                <Border.Style>
                    <Style TargetType="Border">
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#22FFFFFF"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Border.Style>
                <TextBlock Text="Open Search"
                          FontSize="13"
                          Foreground="{StaticResource TextBrush}"/>
            </Border>
            
            <!-- Rescan Projects -->
            <Border Background="Transparent"
                    CornerRadius="6"
                    Cursor="Hand"
                    MouseLeftButtonDown="RescanProjects_Click"
                    Padding="12,10"
                    Margin="0,4,0,0">
                <Border.Style>
                    <Style TargetType="Border">
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#22FFFFFF"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Border.Style>
                <TextBlock Text="Rescan Projects"
                          FontSize="13"
                          Foreground="{StaticResource TextBrush}"/>
            </Border>
            
            <!-- Separator -->
            <Border Height="1"
                    Background="#22FFFFFF"
                    Margin="8,8"
                    IsHitTestVisible="True"/>
            
            <!-- Check for Updates -->
            <Border Background="Transparent"
                    CornerRadius="6"
                    Cursor="Hand"
                    MouseLeftButtonDown="CheckForUpdates_Click"
                    Padding="12,10">
                <Border.Style>
                    <Style TargetType="Border">
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#22FFFFFF"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Border.Style>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0"
                              Text="Check for Updates"
                              FontSize="13"
                              Foreground="{StaticResource TextBrush}"/>
                    <Ellipse x:Name="TrayUpdateIndicator"
                             Grid.Column="1"
                             Width="8" Height="8"
                             Fill="#4CAF50"
                             VerticalAlignment="Center"
                             Margin="8,0,0,0"
                             Visibility="Collapsed"/>
                </Grid>
            </Border>
            
            <!-- Settings -->
            <Border Background="Transparent"
                    CornerRadius="6"
                    Cursor="Hand"
                    MouseLeftButtonDown="Settings_Click"
                    Padding="12,10"
                    Margin="0,4,0,0">
                <Border.Style>
                    <Style TargetType="Border">
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#22FFFFFF"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Border.Style>
                <TextBlock Text="Settings"
                          FontSize="13"
                          Foreground="{StaticResource TextBrush}"/>
            </Border>
            
            <!-- Separator -->
            <Border Height="1"
                    Background="#22FFFFFF"
                    Margin="8,8"
                    IsHitTestVisible="True"/>
            
            <!-- Exit -->
            <Border Background="Transparent"
                    CornerRadius="6"
                    Cursor="Hand"
                    MouseLeftButtonDown="Exit_Click"
                    Padding="12,10">
                <Border.Style>
                    <Style TargetType="Border">
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#22FFFFFF"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Border.Style>
                <TextBlock Text="Exit"
                          FontSize="13"
                          Foreground="{StaticResource TextBrush}"/>
            </Border>
            
            <!-- Version Display -->
            <Border Margin="8,8,8,0" Padding="8,6">
                <TextBlock x:Name="VersionText"
                          Text="v1.0.0"
                          FontSize="11"
                          Foreground="#66FFFFFF"
                          HorizontalAlignment="Center"/>
            </Border>
        </StackPanel>
    </Border>
</Window>
